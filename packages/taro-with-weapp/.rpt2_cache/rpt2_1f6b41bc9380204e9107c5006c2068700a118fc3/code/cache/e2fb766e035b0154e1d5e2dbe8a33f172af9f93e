{"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/index.ts\"],\"names\":[],\"mappings\":\"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\"}","code":"import { internal_safe_set as safeSet, internal_safe_get as safeGet, setIsUsingDiff } from '@tarojs/taro';\r\nimport { lifecycles, lifecycleMap, TaroLifeCycles } from './lifecycle';\r\nimport { bind, proxy, isEqual } from './utils';\r\nimport { diff } from './diff';\r\nimport { clone } from './clone';\r\nfunction defineGetter(component, key, getter) {\r\n    Object.defineProperty(component, key, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get: () => {\r\n            if (getter === 'props') {\r\n                return component.props;\r\n            }\r\n            return Object.assign(Object.assign({}, component.state), component.props);\r\n        }\r\n    });\r\n}\r\nfunction isFunction(o) {\r\n    return typeof o === 'function';\r\n}\r\nexport default function withWeapp(weappConf) {\r\n    return (ConnectComponent) => {\r\n        class BaseComponent extends ConnectComponent {\r\n            constructor(props) {\r\n                super(props);\r\n                this._observeProps = [];\r\n                // mixins 可以多次调用生命周期\r\n                this.willMounts = [];\r\n                this.didMounts = [];\r\n                this.didHides = [];\r\n                this.didShows = [];\r\n                this.willUnmounts = [];\r\n                this.safeExecute = (func, ...args) => {\r\n                    if (isFunction(func))\r\n                        func.apply(this, args);\r\n                };\r\n                this.selectComponent = (...args) => {\r\n                    if (this.$scope && this.$scope.selectComponent) {\r\n                        this.$scope.selectComponent(...args);\r\n                    }\r\n                    else {\r\n                        // tslint:disable-next-line: no-console\r\n                        console.error(`this.$scope 下没有 selectComponent 方法`);\r\n                    }\r\n                };\r\n                this.getRelationNodes = (...args) => {\r\n                    if (this.$scope && this.$scope.getRelationNodes) {\r\n                        this.$scope.getRelationNodes(...args);\r\n                    }\r\n                    else {\r\n                        // tslint:disable-next-line: no-console\r\n                        console.error(`this.$scope 下没有 getRelationNodes 方法`);\r\n                    }\r\n                };\r\n                this.setData = (obj, callback) => {\r\n                    let oldState;\r\n                    if (this.observers && Object.keys(Object.keys(this.observers))) {\r\n                        oldState = clone(this.state);\r\n                    }\r\n                    Object.keys(obj).forEach(key => {\r\n                        safeSet(this.state, key, obj[key]);\r\n                    });\r\n                    setIsUsingDiff(false);\r\n                    this.setState(this.state, () => {\r\n                        setIsUsingDiff(true);\r\n                        this.triggerObservers(this.state, oldState);\r\n                        if (callback) {\r\n                            callback.call(this);\r\n                        }\r\n                    });\r\n                };\r\n                this.triggerEvent = (eventName, ...args) => {\r\n                    const func = this.props[`on${eventName[0].slice(0, 1).toUpperCase()}${eventName.slice(1)}`];\r\n                    if (isFunction(func)) {\r\n                        func.apply(this, args.map(a => ({ detail: a })));\r\n                    }\r\n                };\r\n                this.init(weappConf);\r\n                defineGetter(this, 'data', 'state');\r\n                defineGetter(this, 'properties', 'props');\r\n            }\r\n            initProps(props) {\r\n                for (const propKey in props) {\r\n                    if (props.hasOwnProperty(propKey)) {\r\n                        const propValue = props[propKey];\r\n                        if (!isFunction(propValue)) {\r\n                            if (propValue.observer) {\r\n                                this._observeProps.push({\r\n                                    name: propKey,\r\n                                    observer: propValue.observer\r\n                                });\r\n                            }\r\n                        }\r\n                        proxy(this, 'props', propKey);\r\n                    }\r\n                }\r\n            }\r\n            init(options) {\r\n                for (const confKey in options) {\r\n                    const confValue = options[confKey];\r\n                    switch (confKey) {\r\n                        case 'externalClasses':\r\n                            break;\r\n                        case 'data':\r\n                            this.state = confValue;\r\n                            const keys = Object.keys(this.state);\r\n                            let i = keys.length;\r\n                            while (i--) {\r\n                                const key = keys[i];\r\n                                proxy(this, `state`, key);\r\n                            }\r\n                            break;\r\n                        case 'properties':\r\n                            this.initProps(confValue);\r\n                            break;\r\n                        case 'methods':\r\n                            for (const key in confValue) {\r\n                                const method = confValue[key];\r\n                                this[key] = bind(method, this);\r\n                            }\r\n                            break;\r\n                        case 'behaviors':\r\n                            // this.initMixins(confValue, options);\r\n                            break;\r\n                        case 'lifetimes':\r\n                            for (const key in confValue) {\r\n                                const lifecycle = confValue[key];\r\n                                this.initLifeCycles(key, lifecycle);\r\n                            }\r\n                            break;\r\n                        default:\r\n                            if (lifecycles.has(confKey)) {\r\n                                const lifecycle = options[confKey];\r\n                                this.initLifeCycles(confKey, lifecycle);\r\n                            }\r\n                            else if (isFunction(confValue)) {\r\n                                this[confKey] = bind(confValue, this);\r\n                            }\r\n                            else {\r\n                                this[confKey] = confValue;\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            initLifeCycles(lifecycleName, lifecycle) {\r\n                for (const lifecycleKey in lifecycleMap) {\r\n                    const cycleNames = lifecycleMap[lifecycleKey];\r\n                    if (cycleNames.indexOf(lifecycleName) !== -1) {\r\n                        switch (lifecycleKey) {\r\n                            case TaroLifeCycles.DidHide:\r\n                                this.didHides.push(lifecycle);\r\n                                break;\r\n                            case TaroLifeCycles.DidMount:\r\n                                this.didMounts.push(lifecycle);\r\n                                break;\r\n                            case TaroLifeCycles.DidShow:\r\n                                this.didShows.push(lifecycle);\r\n                                break;\r\n                            case TaroLifeCycles.WillMount:\r\n                                this.willMounts.push(lifecycle);\r\n                                break;\r\n                            case TaroLifeCycles.WillUnmount:\r\n                                this.willUnmounts.push(lifecycle);\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n                // mixins 不会覆盖已经设置的生命周期，加入到 this 是为了形如 this.created() 的调用\r\n                if (!isFunction(this[lifecycleName])) {\r\n                    this[lifecycleName] = lifecycle;\r\n                }\r\n            }\r\n            executeLifeCycles(funcs, ...args) {\r\n                for (let i = 0; i < funcs.length; i++) {\r\n                    const func = funcs[i];\r\n                    this.safeExecute(func, ...args);\r\n                }\r\n            }\r\n            triggerObservers(current, prev) {\r\n                const observers = this.observers;\r\n                if (observers == null) {\r\n                    return;\r\n                }\r\n                if (Object.keys(observers).length === 0) {\r\n                    return;\r\n                }\r\n                const result = diff(current, prev);\r\n                const resultKeys = Object.keys(result);\r\n                if (resultKeys.length === 0) {\r\n                    return;\r\n                }\r\n                for (const observerKey in observers) {\r\n                    const keys = observerKey.split(',').map(k => k.trim());\r\n                    const args = [];\r\n                    for (let i = 0; i < keys.length; i++) {\r\n                        const key = keys[i];\r\n                        for (let j = 0; j < resultKeys.length; j++) {\r\n                            const resultKey = resultKeys[j];\r\n                            if (resultKey.startsWith(key) ||\r\n                                (key.startsWith(resultKey) && key.endsWith(']'))) {\r\n                                args.push(safeGet(current, key));\r\n                            }\r\n                        }\r\n                    }\r\n                    if (args.length) {\r\n                        observers[observerKey].apply(this, args);\r\n                    }\r\n                }\r\n            }\r\n            componentWillMount() {\r\n                this._observeProps.forEach(({ name: key, observer }) => {\r\n                    const prop = this.props[key];\r\n                    if (typeof observer === 'string') {\r\n                        const ob = this[observer];\r\n                        if (isFunction(ob)) {\r\n                            ob.call(this, prop, prop, key);\r\n                        }\r\n                    }\r\n                    else if (isFunction(observer)) {\r\n                        observer.call(this, prop, prop, key);\r\n                    }\r\n                });\r\n                this.safeExecute(super.componentWillMount);\r\n                this.executeLifeCycles(this.willMounts, this.$router.params || {});\r\n            }\r\n            componentDidMount() {\r\n                this.safeExecute(super.componentDidMount);\r\n                this.executeLifeCycles(this.didMounts);\r\n            }\r\n            componentWillUnmount() {\r\n                this.safeExecute(super.componentWillUnmount);\r\n                this.executeLifeCycles(this.willUnmounts);\r\n            }\r\n            componentDidHide() {\r\n                this.safeExecute(super.componentDidHide);\r\n                this.executeLifeCycles(this.didHides);\r\n            }\r\n            componentDidShow() {\r\n                this.safeExecute(super.componentDidShow);\r\n                this.executeLifeCycles(this.didShows, this.$router.params || {});\r\n            }\r\n            componentWillReceiveProps(nextProps) {\r\n                this.triggerObservers(nextProps, this.props);\r\n                this._observeProps.forEach(({ name: key, observer }) => {\r\n                    const prop = this.props[key];\r\n                    const nextProp = nextProps[key];\r\n                    // 小程序是深比较不同之后才 trigger observer\r\n                    if (!isEqual(prop, nextProp)) {\r\n                        if (typeof observer === 'string') {\r\n                            const ob = this[observer];\r\n                            if (isFunction(ob)) {\r\n                                ob.call(this, nextProp, prop, key);\r\n                            }\r\n                        }\r\n                        else if (isFunction(observer)) {\r\n                            observer.call(this, nextProp, prop, key);\r\n                        }\r\n                    }\r\n                });\r\n                this.safeExecute(super.componentWillReceiveProps);\r\n            }\r\n        }\r\n        const props = weappConf['properties'];\r\n        if (props) {\r\n            for (const propKey in props) {\r\n                const propValue = props[propKey];\r\n                if (propValue != null && !isFunction(propValue)) {\r\n                    if (propValue.value !== undefined) { // 如果是 null 也赋值到 defaultProps\r\n                        BaseComponent.defaultProps = Object.assign({ [propKey]: propValue.value }, BaseComponent.defaultProps);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        const staticOptions = ['externalClasses', 'relations', 'options'];\r\n        staticOptions.forEach(option => {\r\n            const value = weappConf[option];\r\n            if (value != null) {\r\n                BaseComponent[option] = value;\r\n            }\r\n        });\r\n        return BaseComponent;\r\n    };\r\n}\r\n//# sourceMappingURL=index.js.map"}
